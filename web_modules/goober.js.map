{"version":3,"file":"goober.js","sources":["../node_modules/goober/src/core/to-hash.js","../node_modules/goober/src/core/get-sheet.js","../node_modules/goober/src/core/update.js","../node_modules/goober/src/core/astish.js","../node_modules/goober/src/core/parse.js","../node_modules/goober/src/core/hash.js","../node_modules/goober/src/core/compile.js","../node_modules/goober/src/css.js","../node_modules/goober/src/styled.js"],"sourcesContent":["/**\n * Transforms the input into a className\n * @param {String} str \n */\nexport const toHash = (str) => (\n    \".go\" + str\n        .split(\"\")\n        .reduce((out, i) => (out + i.charCodeAt(0)) | 8, 4)\n);","/**\n * Returns the _commit_ target\n * @param {Object} target\n */\nconst GOOBER_ID = \"_goober\";\nconst ssr = {\n    data: \"\"\n};\nexport const getSheet = target => {\n    try {\n        let sheet = target ? target.querySelector('#' + GOOBER_ID) : self[GOOBER_ID];\n        if (!sheet) {\n            let _target = target || document.head;\n            _target.innerHTML += '<style id=\"' + GOOBER_ID + '\"> </style>';\n            sheet = _target.lastChild;\n        }\n        return sheet.firstChild;\n    } catch (e) {}\n    return ssr;\n};\n","import { getSheet } from \"./get-sheet\";\n/**\n * Extracts and wipes the cache\n * @returns {String}\n */\nconst extractCss = target => {\n    const sheet = getSheet(target);\n    const out = sheet.data;\n    sheet.data = \"\";\n    return out;\n};\n\n/**\n * Updates the target and keeps a local cache\n * @param {String} css\n * @param {Object} target\n * @param {Boolean} append\n */\nconst update = (css, sheet, append) => {\n    sheet.data.indexOf(css) < 0 && (\n        sheet.data = append ? css + sheet.data : sheet.data + css\n    );\n};\n\nexport { extractCss, update };\n","const newRule = /(?:([a-z0-9-%@]+) *:? *([^{;]+?);|([^;}{]*?) +{)|(})/gi;\nconst ruleClean = /\\/\\*.*?\\*\\/|\\s{2,}|\\n/gm;\n\n/**\n * Convert a css style string into a object\n * @param {string} val \n * @returns {object}\n */\nexport const astish = val => {\n    let tree = [{}];\n    let block;\n    \n    while ((block = newRule.exec(val.replace(ruleClean, \"\")))) {\n        // Remove the current entry\n        if (block[4]) tree.shift();\n        \n        if (block[3]) {\n            tree.unshift((tree[0][block[3]] = {}));\n        } else if (!block[4]) {\n            tree[0][block[1]] = block[2];\n        }\n    }\n    \n    return tree[0];\n}","/**\n * Parses the object into css, scoped, blocks\n * @param {Object} obj \n * @param {String} paren \n * @param {String} wrapper \n */\nexport const parse = (obj, paren, wrapper) => {\n    let current = \"\";\n    let blocks = \"\";\n    let outer = \"\";\n    \n    // If we're dealing with keyframes just flatten them\n    if (/^@[k|f]/.test(wrapper)) {\n      // Return the wrapper, which should be the @keyframes selector\n      // and stringify the obj which should be just flatten \n      return wrapper + JSON.stringify(obj).replace(/\",\"/g, \";\").replace(/\"|,\"/g, \"\").replace(/:{/g, \"{\");\n    }\n    \n    for (let key in obj) {\n        const val = obj[key];\n        \n        // If this is a 'block'\n        if (typeof val === \"object\") {\n\n            // Regular selector\n            let next = paren + \" \" + key;\n            \n            // Nested\n            if (/&/g.test(key)) next = key.replace(/&/g, paren);\n    \n            // Media queries or other\n            if (key[0] == '@') next = paren;\n    \n            // Call the parse for this block\n            blocks += parse(val, next, next == paren ? key : wrapper || '');\n        } else {\n            if (/^@i/.test(key)) outer = key + \" \" + val + \";\";\n            // Push the line for this property\n            else current += key.replace(/[A-Z]/g, \"-$&\").toLowerCase() + \":\" + val + \";\";\n        }\n    }\n    \n    // If we have properties\n    if (current.charCodeAt(0)) {\n        // Standard rule composition\n        const rule = paren + \"{\" + current + \"}\";\n        \n        // With wrapper\n        if (wrapper) return blocks + wrapper + \"{\" + rule + \"}\";\n    \n        // Else just push the rule\n        return outer + rule + blocks;\n    }\n  \n    return outer + blocks;\n};","import { toHash } from \"./to-hash\";\nimport { update } from \"./update\";\nimport { astish } from \"./astish\";\nimport { parse } from \"./parse\";\n\n/**\n * In-memory cache.\n */\nlet cache = {\n    c: 0\n};\n\n/**\n * Generates the needed className\n * @param {String|Object} compiled\n * @param {Object} sheet StyleSheet target\n * @param {Object} g Global flag\n * @param {Object} append Append or not\n * @returns {String} \n */\nexport const hash = (compiled, sheet, g, append) => {\n    // generate hash\n    const compString = JSON.stringify(compiled);\n    const className = cache[compString] || (cache[compString] = g ? \"\" : toHash(compString));\n\n    // Parse the compiled\n    const parsed = cache[className] || (\n        cache[className] = parse(\n            compiled[0] ? astish(compiled) : compiled,\n            className\n        )\n    );\n\n    // add or update\n    update(parsed, sheet, append);\n\n    // return hash\n    return className.slice(1);\n};\n","/**\n * Can parse a compiled string, from a tagged template\n * @param {String} value\n * @param {Object} [props]\n */\nexport const compile = (str, defs, data) => {\n    return str.reduce((out, next, i) => {\n        let tail = defs[i];\n    \n        if (typeof defs[i] == \"function\") {\n          const res = defs[i](data);\n          const attr = res && (res.attributes || res.props);\n          const end = (attr && attr.className) || (/^go/.test(res) && res);\n    \n          tail = (end ? \".\" + end : (attr ? \"\" : res));\n        }\n        return out + next + (tail || \"\");\n      }, \"\");\n}","import { hash } from \"./core/hash\";\nimport { compile } from \"./core/compile\";\nimport { getSheet } from \"./core/get-sheet\";\n\n/**\n * css entry\n * @param {String|Object|Function} val\n */\nfunction css(val) {\n    const ctx = this || {};\n    const _val = val.call ? val(ctx.p) : val;\n\n    return hash(\n        _val.map ? compile(_val, [].slice.call(arguments, 1), ctx.p) : _val,\n        getSheet(ctx.target),\n        ctx.g,\n        ctx.o\n    );\n}\n\n/**\n * CSS Global function to declare global styes\n */\nconst glob = css.bind({ g: 1 });\n\nexport { css, glob };\n","import { css } from \"./css\";\n\nlet h;\nlet useTheme = () => ({});\nlet forwardRef;\nconst setPragma = pragma => { h = pragma };\nconst setForwardRef = fn => { forwardRef = fn };\nconst setUseTheme = fn => { useTheme = fn }\n\n// in styled fn add the following\n;\n\n/**\n * Styled function\n * @param {String} tag\n */\nfunction styled(tag) {\n  const _ctx = this || {};\n\n  return function () {\n    const _args = arguments;\n\n    function Styled(props, ref) {\n      const theme = useTheme();\n      const _props = _ctx.p = Object.assign({}, props, { theme });\n      const _previousClassName = _props.className;\n\n      _ctx.o = /\\s*go[0-9]+/g.test(_previousClassName);\n      _props.className = css.apply(_ctx, _args) + (_previousClassName ? \" \" + _previousClassName : \"\");\n      if (forwardRef) {\n        _props.ref = ref;\n      }\n\n      return h(\n        tag,\n        _props\n      );\n    };\n    return forwardRef ? forwardRef(Styled) : Styled;\n  };\n}\n\nexport { styled, setPragma, setForwardRef, setUseTheme };\n"],"names":[],"mappings":"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"}